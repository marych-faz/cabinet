<!-- form.html -->
<form id="changePasswordForm">
  <label>Текущий пароль:</label>
  <input type="password" id="oldPassword" required><br>

  <label>Новый пароль:</label>
  <input type="password" id="newPassword" required><br>

  <label>Подтвердите новый пароль:</label>
  <input type="password" id="confirmPassword" required><br>

  <button type="submit">Изменить пароль</button>
</form>

<p id="message"></p>

<script>
document.getElementById('changePasswordForm').addEventListener('submit', function(e) {
  e.preventDefault();

  const oldPass = document.getElementById('oldPassword').value;
  const newPass = document.getElementById('newPassword').value;
  const confirmPass = document.getElementById('confirmPassword').value;

  if (newPass !== confirmPass) {
    document.getElementById('message').textContent = "Новые пароли не совпадают.";
    return;
  }

  // Отправка данных на сервер
  fetch('change_password.php', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ old_password: oldPass, new_password: newPass })
  })
  .then(response => response.json())
  .then(data => {
    document.getElementById('message').textContent = data.message;
  });
});
</script>